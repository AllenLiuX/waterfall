"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}!function(t,e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.export?module.exports=e:t.waterfall=e}(window,function(t){var c,u,a,r,e,n,i,o=this,l=arguments,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=s.direction||"v",h=s.spacing||20,y=s.baseWidth||350,d=s.height||260,g=s.accuracy||2,m=s.datas||null,p=s.rowClass||"",v=s.itemClass||"",b=function(t){return Math.floor(100*t)/100},w=function(){var t=document.createElement("div"),e="";return m.forEach(function(t){e+="string"==typeof t?'\n                    <div class="fall-item">\n                        <img alt="'+t+'" src="'+t+'"/>\n                    </div>\n                ':'\n                    <div class="fall-item">\n                        <img alt="'+t.url+'" src="'+t.url+'"/>\n                    </div>\n                '}),t.innerHTML=e,t.children},E=function(t){return t+"px"},S=function(){c.innerHTML="";var o=c.clientWidth,l=0,a=[],r=[],i=function(){if(!(a.length<1)){var t=o-(a.length-1)*h,n=0,i=0;1==a.length?i=d:(a.forEach(function(t){var e=t.querySelector("img");n+=e.width/e.height}),i=b(t/n)-g),a.forEach(function(t,e){var n=t.querySelector("img"),r=n.width/n.height*i;n.style.height=i+"px",e===a.length-1?(n.style.width="auto",t.style.marginRight=0):(n.style.width=r+"px",t.style.marginRight=h+"px")}),r.push(a),l=0,a=[]}};u.forEach(function(t,e){var n=t.querySelector("img"),r=b(d/n.naturalHeight)*n.naturalWidth;(t.dataset.index=e,o<l+r)&&(function(n){var t=Array.from(arguments).splice(1,arguments.length),r=n,i=n;return t.forEach(function(t){var e=Math.abs(t-n);e<i&&(i=e,r=t)}),r}(o,l,l+r)===l&&i());l+=r+=h,a.push(t),e>=u.length-1&&i()}),r.forEach(function(t,e){var n=document.createElement("div");n.classList.add("fall-row"),n.classList.add(p),n.style.display="flex",n.style.justifyContent="space-between",e<r.length-1&&(n.style.marginBottom=h+"px"),n.append.apply(n,_toConsumableArray(t)),c.appendChild(n)})},x=function(){c.innerHTML="","h"===f?S():function(){var t=c.clientWidth,e=Math.floor((t+h)/(y+h));e<1&&(e=1);var l=(t+h)/e-h;u.length<e&&(e=u.length,l=(t+h)/e-h),a={};for(var n=0;n<e;n++)a[n]=0;u.forEach(function(t){var e=t.querySelector("img"),n=e.naturalWidth,r=e.naturalHeight*(l/n),i=function(t){var e=0;for(var n in t)t[n]<t[e]&&(e=n);return e}(a),o=a[i]||0;e.style.width="100%",e.style.maxWidth="100%",t.style.position="absolute",t.style.top=E(o),t.style.left=E((l+h)*i),t.style.width=E(l),t.style.height=E(r),a[i]=o+r+h,c.appendChild(t)});var r=function(t){var e=0;for(var n in t)t[n]>t[e]&&(e=n);return e}(a);c.style.height=E(a[r])}()};t&&"string"==typeof t&&(c=document.querySelector(t),(u=m&&0<m.length?Array.from(w()):Array.from(c.children)).length&&(r=u.length,u.forEach(function(t){v&&!t.classList.contains(v)&&t.classList.add(v);var e=t.querySelector("img");e.onload=function(){--r<=0&&x()},e.onerror=function(n){u.forEach(function(t,e){t.querySelector("img").src===n.target.src&&u.splice(e,1)}),--r<=0&&x()},e.style.display="block"}),c.style.position="relative",c.style.overflow="hidden",window.addEventListener("resize",(e=x,n=500,i=null,function(){clearTimeout(i),i=setTimeout(function(){return e.bind(o)(l)},n)}))))});