"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.export?module.exports=e:t.waterfall=e}(window,function(t){var n,e,c,o,a,d,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=i.spacing||10,r=i.minWidth||350,l=i.datas||null,f=i.bgColor||"#CCCCCC",s=i.parentBox?document.querySelector(i.parentBox):window,h=function(){var e="";l.forEach(function(t){e+='\n                <div class="fall-item" '+(t.color?"data-color='"+t.color+"'":"")+' >\n                    <img data-width="'+t.width+'" data-height="'+t.height+'" data-src="'+t.url+'" />\n                </div>\n            '}),n.innerHTML=e},y=function(t){return parseInt(t)+"px"},g=function(){(o=Math.floor((n.clientWidth-u)/(r+u)))<1&&(o=1),a=Math.floor((n.clientWidth-u)/o-u),e.length<o&&(o=e.length,a=Math.floor((n.clientWidth-u)/o-u)),d={};for(var t=0;t<o;t++)d[t]=u;!function(){e.forEach(function(t){var e=t.querySelector("img"),n=t.dataset.color||f,o=e.dataset.width,i=e.dataset.height*(a/o);0<=n.indexOf("0x")&&(n="#"+n.substring(n.length-6));var r=function(t){var e=0;for(var n in t)t[n]<t[e]&&(e=n);return e}(d),l=d[r]||0;t.style.position="absolute",t.style.top=y(l),t.style.left=y((a+u)*r+u),t.style.width=y(a),t.style.height=y(i),t.style.backgroundColor=n,d[r]=l+i+u});var t=function(t){var e=0;for(var n in t)t[n]>t[e]&&(e=n);return e}(d);n.style.height=y(d[t]),(d[t]>s.innerHeight||s.clientHeight)&&setTimeout(function(){g()},0)}()},p=function t(){if(c.length<1)return s.removeEventListener("scroll",t);for(var e=c.length;e--;)l=c[e],void 0,a=l.getBoundingClientRect().top,(s.innerHeight?a<=s.innerHeight:a<=s.clientHeight+s.getBoundingClientRect().top)&&(n=c[e],o=e,i=void 0,i=n.querySelector("img"),r=i.dataset.src,i.src=r,c.splice(o,1));var n,o,i,r,l,a};t&&"string"==typeof t&&(n=document.querySelector(t),l&&0<l.length&&(n.innerHTML="",h()),e=Array.from(n.children),c=e.concat(),e.length&&(e.forEach(function(t){var e=t.querySelector("img");e.style.display="block",e.style.width="100%",e.style.maxWidth="100%"}),n.style.position="relative",window.addEventListener("resize",g),s.addEventListener("scroll",p),g(),p()))});